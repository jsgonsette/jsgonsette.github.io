<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Jean-Sébastien Gonsette  | Pendule inversé, part 1</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.75.1" />
    
    
      <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
    

    <link href='https://jsgonsette.github.io/dist/main.css' rel='stylesheet' type="text/css" />
    <link href='https://jsgonsette.github.io/css/jsg.css' rel='stylesheet' type="text/css" />
    <link href='https://jsgonsette.github.io/css/socialSharing.css' rel='stylesheet' type="text/css" />
    
      
    

    

    <meta property="og:title" content="Pendule inversé, part 1" />
<meta property="og:description" content="Introduction, principe général et schéma" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jsgonsette.github.io/projects/ipendulum/part1/" />
<meta property="article:published_time" content="2019-10-19T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-10-19T00:00:00+00:00" /><meta property="og:site_name" content="Jean-Sébastien Gonsette" />
<meta itemprop="name" content="Pendule inversé, part 1">
<meta itemprop="description" content="Introduction, principe général et schéma">
<meta itemprop="datePublished" content="2019-10-19T00:00:00+00:00" />
<meta itemprop="dateModified" content="2019-10-19T00:00:00+00:00" />
<meta itemprop="wordCount" content="3690">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Pendule inversé, part 1"/>
<meta name="twitter:description" content="Introduction, principe général et schéma"/>

      
    
  </head>

  <body class="ma0 avenir bg-near-white">

    

  
  
  <header class="cover bg-top" style="background-image: url('https://jsgonsette.github.io/images/iPendulum/Part1.png');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://jsgonsette.github.io/" class="f3 fw2 hover-white no-underline white-90 dib">
      Jean-Sébastien Gonsette
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/42/" title="42 page">
              42
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/enigmes/" title="Énigmes page">
              Énigmes
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Billets page">
              Billets
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/projects/" title="Projets page">
              Projets
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact/" title="À propos page">
              À propos
            </a>
          </li>
          
        </ul>
      
      






  <a href="https://www.linkedin.com/in/jsgonsette/" class="link-transition linkedin link dib z-999 pt3 pt0-l mr2" title="LinkedIn link">
    <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

  </a>


  <a href="https://github.com/jsgonsette" class="link-transition github link dib z-999 pt3 pt0-l mr2" title="Github link">
    <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

  </a>


    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Pendule inversé, part 1</h1>
        
          <h2 class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
            Introduction, principe général et schéma
          </h2>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <header>
        <p class="f6 b helvetica tracked">
          
            iPendulum
          
        </p>
        <h1 class="f1">
          Pendule inversé, part 1
        </h1>
        <time class="f6 mv4 dib tracked" datetime="2019-10-19T00:00:00Z">
          <b>Publié: </b>October 19, 2019
          

          
        </time>


      </header>
      <div class="nested-copy-line-height lh-copy f4 nested-links nested-img mid-gray">
        <span class="justified">
        <p>Le concept de pendule inversé n’est ni nouveau ni inutile. J’en veux pour preuve que vous, lecteur, en êtes le parfait exemple. Un corps humain est un pendule inversé ! En effet, en regardant la définition sur Wikipedia nous pouvons lire : <em>un pendule inversé est un pendule dont le centre de masse est placé au-dessus de son point de pivot</em>. En d’autres termes il s’agit d’un pendule que l’on a mis la tête en bas et qui ne demande qu’à se casser la figure.</p>
<p>Le centre de gravité de votre corps étant situé au niveau de votre nombril, il se situe bel et bien au-dessus du point de pivot constitué par vos chevilles. Cela implique que dès que votre nombril se déplace un peu trop vers l’avant ou l’arrière, vous devriez choir. Pourtant me direz-vous, vous ne vous cassez pas (trop souvent) la figure. C’est vrai, mais aussi naturel que cela vous semble, cela n’est possible que grâce à de nombreux organes internes collaborant afin de vous maintenir sur vos jambes. Typiquement, vos yeux et votre système vestibulaire travaillent de concert pour indiquer à votre cerveau comment vous êtes orienté dans l’espace. Celui-ci peut alors calculer les ajustements nécessaires pour rectifier tout déséquilibre, sous forme d’impulsions nerveuses envoyées vers les muscles adéquats.</p>
<p>



  


<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="/js/load-photoswipe.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.css" integrity="sha256-sCl5PUOGMLfFYctzDW3MtRib0ctyUvI9Qsmq2wXOeBY=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/default-skin/default-skin.min.css" integrity="sha256-BFeI1V+Vh1Rk37wswuOYn5lsTcaU96hGaI7OUVCLjPc=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe.min.js" integrity="sha256-UplRCs9v4KXVJvVY+p+RSo5Q4ilAUXh7kpjyIP5odyc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.1/photoswipe-ui-default.min.js" integrity="sha256-PWHOlUzc96pMc8ThwRIXPn8yH4NOLu42RQ0b9SpnpFk=" crossorigin="anonymous"></script>


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

</p>
<p>En fait, quoique cela soit plus facile à faire qu’à dire, tous les pendules inversés reposent exactement sur ce principe. Pourtant, voir un pendule inversé (non biologique) à l’œuvre suscite toujours l’étonnement, voire l’émerveillement. Cela trouble assurément notre sens de la logique et de ce qui semble naturel. En effet, les objets inanimés sont généralement incapables de telles prouesses et nous n’y sommes ainsi jamais confrontés. Aussi, j’espère susciter votre étonnement avec ce pendule qui est non seulement capable de tenir en équilibre sur un tout petit point de pivot, mais qui est aussi capable de se relever tout seul.</p>
<h2 id="un-pendule-oui-mais-lequel">Un pendule ! Oui, mais lequel ?</h2>
<p>Pour être honnête, je ne savais même pas au départ que ce que je désirais construire s’appelait un <em>pendule inversé</em>. J’avais bien l’image du Segway en tête, mais je ne connaissais pas la dénomination générique exacte. Heureusement, il n’a pas fallu longtemps à Google pour me révéler le terme correct après avoir commencé mes recherches avec des termes du genre « truc qui tient en équilibre à l’envers ». Cela a ensuite été très vite. Il vous suffit de taper « pendule inversé » dans YouTube pour vous faire submerger par dix ans de vidéo sur le sujet. Il est vrai qu’il s’agit d’un sujet universitaire récurrent, car il permet aux étudiants de tester toutes sortes de techniques de régulation, de se frotter à un sujet multidisciplinaire, et de provoquer à tous les coups un <em>wôw effect</em>.</p>
<p>Il y a donc des modèles pour tous les goûts : cela va du modèle deux roues à la Segway (j’en ai même vu en Lego), à la barre (voir double ou triple barre) en rotation autour d’un chariot se mouvant sur un rail, en passant par le quadricoptère supportant une tige sur laquelle est placée un verre. Le problème récurrent de toutes ces réalisations est qu’aucune ne peut fonctionner décemment sur mon bureau, entre ma souris et mes factures. Au mieux il faut trop d’espace pour le faire fonctionner, au pire, il n’est pas autonome et il faut sortir une alimentation et autres artilleries de laboratoire pour le mettre en branle. Enf ait, mes critères de conception étaient :</p>
<ul>
<li>Petite dimension (une dizaine de cm) et léger ;</li>
<li>Complètement autonome, c’est-à-dire que le pendule doit embarquer sa propre batterie ;</li>
<li>Simple, afin de démythifier le principe général sans ajouter de complexité superflue.</li>
</ul>
<p>C’est alors que je suis tombé sur un projet plutôt épatant réalisé par l’équipe de scientifiques de l’Institut ETH Zurich pour les Systèmes et le Contrôle Dynamiques, le <a href="https://www.youtube.com/watch?v=n_6p-1J551Y">Cubli</a>. Le Cubli est un cube étonnant capable de tenir en équilibre sur l’une de ses arrêtes ou sur l’un de ses coins, en sautant pour passer d’une position à une autre. Je vous invite à visionner leur vidéo qui décrira, bien mieux que les mots, les exploits de ce petit cube robot.</p>
<p>Si le Cubli respecte bien mes deux premiers critères, j’ai eu quelques doutes concernant le 3<!-- raw HTML omitted -->e<!-- raw HTML omitted --> point. Le fait qu’il dispose de trois degrés de liberté afin de se déplacer et maintenir son équilibre dans toutes les directions rend la modélisation un peu ardue. De plus, les équations de mouvement sont <em>joliment</em> non linéaires, ce qui n’arrange pas les choses pour les lois de contrôle qui doivent le piloter. Toutefois, si la généralisation en 3D est complexe, le principe de base en 1D est simple à comprendre et à modéliser.</p>
<p>D’un cube, je suis donc passé à un carré (avec un peu d’épaisseur bien sûr) capable de maintenir son équilibre autour d’un seul axe. Ensuite, comme je n’étais pas spécialement intéressé par le fait que mon carré puisse « rouler », je l’ai encore coupé en deux et le modèle a pris sa forme triangulaire définitive. Même si toutes ces coupes limitent beaucoup les capacités de mouvement du pendule, elles offrent tout de même l’avantage d’une simplification et d’un gain de poids considérable. Comme nous le verrons plus tard, ce gain de poids permet au pendule d’être beaucoup plus agile et de pouvoir maintenir son équilibre de façon plus robuste.</p>
<h2 id="anatomie-dun-pendule-inversé">Anatomie d’un pendule inversé</h2>
<p>Après ce long préambule, vous pouvez légitimement vous dire que je ne vous ai finalement pas encore appris grand-chose et que vous ne savez toujours pas quels sont les principes physiques à l’œuvre dans ce pendule. Je vais y venir, mais pour ça il faut que nous allions d’abord jeter un coup d’œil dans les entrailles de la bête. La figure quis uit vous donne une vue éclatée des différents éléments. Nous pouvons y voir que le pendule est assemblé à partir d’un nombre assez restreint de constituants.</p>

<link rel="stylesheet" href="/css/hugo-easy-gallery.css" />
<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/iPendulum/Pendulum%20Anatomy.jpg" alt="Anatomie d&#39;un pendule inversé."/>
    </div>
    <a href="/images/iPendulum/Pendulum%20Anatomy.jpg" itemprop="contentUrl"></a>
      <figcaption>
          <p>Anatomie d&#39;un pendule inversé.</p>
      </figcaption>
  </figure>
</div>

<p>Le squelette du pendule est assuré par deux demi-coques en plastique, conçues pour pouvoir être imprimées en 3D. Nous reviendrons sur ce point dans le dernier article de cette série. La première demi-coque sert de support au circuit imprimé, tandis que la deuxième assure le maintien du moteur et de sa roue d’inertie. Le circuit imprimé renferme toute l’intelligence du pendule au sein d’un microcontrôleur PIC, mais doit également assurer la commande moteur et la conversion de puissance nécessaire pour l’alimenter à partir d’une batterie. La batterie en question est du type LIPO, tel que largement prisé en modélisme. Elle se glisse directement dans un support prévu pour elle derrière le PCB. Le moteur est l’unique organe de commande du pendule. Il se loge dans une niche prévue à cet effet dans la coque en plastique. Sur ce moteur vient se greffer une roue d’inertie en couplage direct, dont le rôle sera expliqué très bientôt. Cette roue d’inertie est constituée d’un axe en plastique, également imprimé en 3D, sur lequel vient se sertir un anneau métallique dont la masse apporte l’inertie désirée.</p>
<h2 id="comment-ça-marche">Comment ça marche ?</h2>
<p>Tout comme pour le Cubli, le pendule que je vous propose repose sur le principe physique de la <em>conservation du moment angulaire</em> d’une roue d’inertie pour assurer son équilibre. La différence fondamentale vient du nombre de ces roues : trois dans le Cubli, pour une seule dans le cas qui nous occupe. Il faut également préciser que, même si la roue d’inertie en rotation vous fait penser à une toupie et à son effet gyroscopique, ce dernier n’est absolument pas en cause ici.</p>
<p>L’explication de la conservation du moment angulaire nécessite peut-être de vous ramener un peu en arrière, sur les bancs d’école du cours de physique. C’est là que l’on vous a sûrement expliqué les lois du mouvement de Newton, ces grands principes de base concernant le mouvement des corps :</p>
<ul>
<li>
<p>Dans un référentiel galiléen (c.-à-d. soumis à aucune force extérieure), le vecteur vitesse du centre d’inertie d’un système est constant si et seulement si la somme des vecteurs force qui s’exercent sur le système est nulle. Ce principe exprime que la quantité de mouvement d’un corps se conserve si aucune force n’est appliquée dessus.</p>
</li>
<li>
<p>Dans un référentiel galiléen, la somme des forces s’exerçant sur un système est égale à la dérivée de la quantité de mouvement. Il s’agit de la célèbre formule $\sum_i \vec f_i = {\vec dp \over dt}$, ou plus vulgairement, $f=m.a$. Ce principe exprime que la quantité de mouvement d’un corps ($p=mv$) est modifiée au prorata de la résultante des forces qu’il subit.</p>
</li>
<li>
<p>Tout corps A exerçant une force sur un corps B subit une force d’intensité égale dans la même direction, mais de sens opposé. Ce principe est aussi connu comme le principe d’action-réaction. Il traduit également le fait que la quantité de mouvement ne peut pas disparaître. Ce qu’un corps gagne, l’autre le perd ; un peu comme quand vous effectuez un transfert d’argent d’un compte vers un autre, ce n’est jamais perdu pour tout le monde.</p>
</li>
</ul>
<p>Ces principes sont tout à fait généraux et il est nécessaire de les transformer un peu dès qu’ils sont appliqués à un système constitué de plus qu’une particule. En effet, il est très commode de ne pas avoir à manipuler la position de chacune d&rsquo;elles, car leur nombre devient très vite gigantesque. À la place, une seule position est manipulée, appelée centre de gravité du système, auquel est également ajoutée l’orientation angulaire du système autour de ce point. Cette décomposition purement pratique a pour effet de scinder les forces en deux catégories : les composantes qui modifient la <em>quantité de mouvement linéaire</em> du centre de gravité du système, et les composantes qui modifient la <em>quantité de mouvement angulaire</em> du système autour de son centre de gravité.</p>
<p>Lorsque cette décomposition est réalisée mathématiquement, il apparaît que les forces qui modifient la quantité de mouvement angulaire se manipulent plus facilement en faisant intervenir la notion de couple. Un couple n’est jamais que la composante d’une force mettant en rotation un système autour d’un point, multipliée par la distance qui sépare ce point de rotation au point d’application de la force. Une fois cette notion introduite, il est possible de faire apparaître une analogie directe entre les lois concernant la modification de la quantité de mouvement linéaire par des forces, et les lois concernant la modification de la quantité de mouvement angulaire par des couples. Cette analogie est résumée dans le tableau suivant :</p>
<!-- raw HTML omitted -->
<p>Armés de ces principes et de ces définitions, nous sommes maintenant pleinement en mesure de décrire ce qu’il se passe au niveau du pendule. Le fonctionnement est en fait pratiquement identique aux volants d’inertie embarqués dans les engins spatiaux. Imaginez un satellite en orbite autour de la terre qui doit corriger son orientation afin de réaligner correctement ses antennes vers un point précis de la terre. Nous pouvons supposer qu’avant de réaliser sa manœuvre, son moment angulaire est nul (il ne tourne pas sur lui-même). S’il applique alors un couple moteur sur l’un de ses volants d’inertie, ce volant va accélérer sa rotation dans un sens ; mais dans le même temps le reste du satellite va subir un couple de grandeur égale et de sens opposé (3<!-- raw HTML omitted -->e<!-- raw HTML omitted --> principe). Il va dès lors se mettre à tourner dans le sens contraire. Même sans aucun point d’appui extérieur dans l’espace, un satellite peut ainsi s’appuyer sur son volant d’inertie interne pour modifier son moment angulaire. Si nous regardons le satellite complet (volant d’inertie inclus), l’absence de couples externes implique aussi que le moment angulaire total ne peut pas changer, c’est-à-dire qu’il doit rester nul (2<!-- raw HTML omitted -->e<!-- raw HTML omitted --> principe). Cela est bien le cas, car la somme du moment angulaire du volant d’inertie (disons positif) plus le moment angulaire du reste du satellite (négatif) ne change jamais si les seuls couples en jeu sont des couples entre des constituants internes. Pour revenir à l’analogie sur les comptes en banque, sans apport d’argent externe, vous aurez beau transférer de l’argent entre votre compte courant et vos comptes épargnes dans tous les sens, vous ne deviendrez jamais plus riche.</p>
<p>La situation est pratiquement identique pour le pendule, mais avec la contrainte que le couple extérieur n’est pas nul à cause de l’action de la gravité. Aussi, si vous essayez de maintenir tel quel le pendule sur sa pointe, la gravité aura pour effet de transformer le moindre déséquilibre en une accélération angulaire non nulle, jusqu’à ce qu’il s’écrase au sol. Le seul moyen de contrer la gravité est d’amener le centre de gravité du pendule exactement au-dessus de son point de pivot. Comme ce point est petit, cette opération n’est pas possible en pratique. Par contre, il est tout à fait possible d’amener le centre de gravité du pendule au-dessus du pivot, en <em>moyenne</em>. Ainsi, c’est en tirant le pendule vers la gauche quand il dévie vers la droite, et inversement, qu’il est possible de le maintenir en équilibre et de contrer l’action de la gravité. C’est là que le moteur et sa roue d’inertie entrent en jeu. Comme pour le satellite, il est possible de faire accélérer le corps du pendule dans un sens en accélérant sa roue d’inertie dans l’autre sens. Cela revient, à chaque instant, à mesurer par où tombe le pendule et à en déduire la valeur du couple moteur à appliquer pour compenser le déséquilibre. Si la commande est bien réalisée, le pendule décrira de petites oscillations, tantôt vers la gauche, tantôt vers la droite, mais ne tombera pas.</p>
<h2 id="et-pour-le-saut-alors">Et pour le saut alors ?</h2>
<p>La capacité du pendule à sauter, pour passer depuis sa position couchée à sa position d’équilibre, est assurément surprenante. Pourtant, l’explication est plutôt simple. Une fois dévoilée, elle vous laissera la même impression que la révélation d’un tour de magie qui semblait tellement extraordinaire. Le principe consiste tout bonnement à accélérer la roue d’inertie dans la direction vers laquelle nous voulons sauter, jusqu’à ce qu’elle atteigne la vitesse adéquate. À ce moment, il suffit de bloquer la roue pour que tout le pendule décolle.
Nous pouvons une fois encore appeler Newton à la rescousse pour expliquer les détails du phénomène. Quand il est au sol, roue à l’arrêt, le moment angulaire du pendule est nul. Il est toutefois capable d’accélérer sa roue d’inertie et gagner ainsi en moment angulaire en s’appuyant sur ce sol. C’est grâce à cet appui que l’opération est possible, cela ne fonctionnerait pas dans l’espace. Une fois une vitesse de rotation suffisante acquise, bloquer la roue revient à faire passer son moment angulaire à zéro. Toutefois, nous avons vu que le moment angulaire d’un système isolé se conserve et ne peut pas disparaître, il faut donc le transférer quelque part. Et ce quelque part, c’est le pendule lui-même ! Concrètement, bloquer la roue revient à exercer un grand couple sur celle-ci pour la faire décélérer rapidement. Ce couple a pour effet d’extraire le moment angulaire de la roue. Or, le troisième principe nous dit qu’un couple opposé va être exercé sur l’organe de freinage (lié au pendule), transférant ainsi le moment angulaire vers celui-ci. L’opération est blanche si nous prenons un point de vue externe et considérons le pendule et sa roue comme un tout. Au départ, le moment angulaire provenait de la rotation de la roue, tandis qu&rsquo;il provient de la rotation du pendule lui-même après le freinage. Mais le moment angulaire total, lui, ne change pas.</p>
<h2 id="électronique-du-pendule">Électronique du pendule</h2>
<p>Je pense que nous avons fait assez de théorie pour cette fois-ci. Je donnerai plus de détails sur les lois de contrôle lors du prochain article. En attendant, il est temps de vous mettre quelque chose de concret sous la dent. C’est pourquoi je vous propose d’examiner l’électronique embarquée du pendule. D’un certain point de vue, il s’agit peut-être de la partie la plus simple, car nous restons ici dans du très classique.</p>
<p>L’électronique du pendule doit assurer quatre grandes fonctions :</p>
<ol>
<li>Convertir la puissance issue de la batterie LIPO afin d’alimenter le moteur brushless ;</li>
<li>Délivrer les signaux de commande adéquats pour faire tourner le moteur brushless ;</li>
<li>Mesurer la dynamique du pendule au moyen d’un accéléromètre et d’un gyroscope ;</li>
<li>Implémenter la loi de commande du moteur dans un microcontrôleur en fonction des valeurs retournées par les capteurs.</li>
</ol>
<p>La tension délivrée par la batterie LIPO varie entre 7 V et un peu plus de 8 V en fonction de son état de charge. Le moteur Maxon, quant à lui, fonctionne avec une tension nominale de 12 V. Une alimentation à découpage articulée autour d’un circuit MAX668 (U300) a dès lors pour but de réaliser l’adaptation de puissance nécessaire. Étant donné que le moteur absorbe un courant de 2 A pour un couple de 55mNm, l’alimentation doit être capable de fournir au moins le double d’intensité. L’alimentation suit un schéma de régulateur Boost classique. Lorsque la broche 8 de U300 est à l’état haut, le transistor de puissance T300 conduit et cela a pour effet de faire grimper l’intensité du courant passant à travers de l’inductance de puissance L300. La diode D300, elle, empêche que le condensateur de sortie C307 ne se décharge par la même occasion. Lorsque la broche 8 passe à l’état bas, le condensateur se bloque, obligeant ainsi l’énergie magnétique accumulée dans L300 à se déverser dans C307 au travers de la diode. U300 régule les cycles de ce processus à une fréquence configurable, qui est ici fixée à 300 kHz au travers de R300. Cette régulation se base sur la tension de sortie prélevée aux bornes de R203 et R302, ainsi que sur le courant circulant dans l’inductance et mesuré à travers de R301. La tension de sortie v12 contient immanquablement des ondulations hautes fréquences dues aux charges et décharges répétées de C307. Cette ondulation est toutefois dominée par la valeur de sa résistance série équivalente (ESR) et des courants hautes fréquences qui la traversent. C’est pourquoi un soin tout particulier doit être apporté à la sélection de ce condensateur.</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/iPendulum/SchPower.png" alt="Schématique de l&#39;alimentation à découpage du pendule, ainsi que des alimentations linéaires secondaires."/>
    </div>
    <a href="/images/iPendulum/SchPower.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Schématique de l&#39;alimentation à découpage du pendule, ainsi que des alimentations linéaires secondaires.</p>
      </figcaption>
  </figure>
</div>

<p>Le moteur sélectionné pour ce projet est un moteur sans balais (<em>brushless</em>) de la série EC Flat de chez Maxon. Par rapport à un moteur DC traditionnel, l’absence de balais évite une usure mécanique prématurée et des bruits électromagnétiques associés. Il permet en outre une meilleure conversion de puissance. D’un autre côté, il souffre d’un prix de construction plus élevé ainsi que d’une logique de commande bien plus complexe. En effet, il est nécessaire d’alimenter un tel moteur via trois phases, en permutant les flux magnétiques de celles-ci au rythme de rotation précis du rotor. Dit simplement, on ne peut pas juste faire tourner le moteur <em>brushless</em> en le connectant à une source de tension. Il est nécessaire de disposer d’un système électronique pour superviser la séquence d’alimentation des bobines. C’est ici que le circuit intégré L6235 (U100) entre en jeu. Ce dernier contient toute la logique pour piloter un tel moteur, y compris les transistors de puissance. Il se pilote par un ensemble d’E/S relativement simples. « Fwd/Rev » permet de choisir le sens de rotation souhaité, « Brake » active la fonction de freinage électromagnétique (c’est cette fonction qui permet au pendule de sauter), « En » permet d’activer la rotation du moteur, « Vref » est une entrée analogique permettant de choisir la limite de courant délivré au moteur, « Diag » signale le déclenchement d’une protection interne et enfin, « Tacho » délivre les impulsions tachymétriques. La sélection de limite de couple se réalise par la conversion d’un signal PWM en tension analogique grâce au filtre passe-bas constitué par R100, R103 et C101. La connexion aux trois phases du moteur est effectuée sur les trois sorties « Out1 » à « Out3 », tandis que les signaux de position issus des capteurs à effet hall du moteur sont décodés sur les entrées « H1 » à « H3 ». Le circuit contrôle le courant absorbé par le moteur en le mesurant au travers des résistances R107, 109,110,112 et en le comparant à la consigne fixée sur « Vref ». Ce circuit permet bien de contrôler le couple délivré puisque le couple d’un tel moteur est proportionnel au courant absorbé.</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/iPendulum/SchBLDC.png" alt="Schématique du bloc de pilotage du moteur brushless."/>
    </div>
    <a href="/images/iPendulum/SchBLDC.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Schématique du bloc de pilotage du moteur brushless.</p>
      </figcaption>
  </figure>
</div>

<p>Le pendule ne peut acquérir le sens de l’équilibre qu’en étant capable de mesurer sa position dans l’espace et de corriger cette position en conséquence. Il doit donc être doté de capteurs permettant de lui indiquer quel est l’angle qu’il forme avec le sol. Ces capteurs sont constitués d&rsquo;un gyroscope 1 axe, matérialisé par le circuit ISZ-2510, et d&rsquo;un accéléromètre 3 axes embarqué dans le circuit ADXL345. Nous verrons dans le prochain article comment il est possible de reconstruire les paramètres dynamiques du pendule en fonction de ces mesures. Ces deux circuits sont en fait des capteurs analogiques intégrés dans un circuit numérique. Ils disposent ainsi de deux entrées d’alimentation distinctes. La raison d&rsquo;être de ces deux entrées est liée à la mesure analogique qui doit être le moins possible polluée par les bruits numériques du reste du circuit. Les deux circuits dialoguent avec le microcontrôleur via un bus SPI.</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/iPendulum/SchSensors.png" alt="Schématique des capteurs mesurant le mouvement angulaire du pendule, ainsi que des vecteurs d&#39;accélération."/>
    </div>
    <a href="/images/iPendulum/SchSensors.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Schématique des capteurs mesurant le mouvement angulaire du pendule, ainsi que des vecteurs d&#39;accélération.</p>
      </figcaption>
  </figure>
</div>

<p>Toute l’intelligence du pendule est embarquée dans un microcontrôleur dsPIC de 16 bits. Par rapport aux PIC32, la famille 16 bits est idéale dans un projet tel que celui-ci où la réactivité prime sur la puissance de calcul. De plus, l’espace mémoire offert en RAM et ROM est assez généreux et permet le développement d’applications plus complexes que sur une famille 8 bits. Enfin, les dsPIC bénéficient également de sorties PWM qui sont utilisées dans ce projet pour commander le moteur. Le microcontrôleur se programme de manière classique via son interface ICD/ICP reliée au connecteur P200. L’une de ses UART est utilisée pour réaliser un port série au travers du circuit SN65C3221 (U201).</p>


<div class="box" >
  <figure  itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject">
    <div class="img">
      <img itemprop="thumbnail" src="/images/iPendulum/SchController.png" alt="Schématique incluant le microcontroleur et son interface UART."/>
    </div>
    <a href="/images/iPendulum/SchController.png" itemprop="contentUrl"></a>
      <figcaption>
          <p>Schématique incluant le microcontroleur et son interface UART.</p>
      </figcaption>
  </figure>
</div>


        </span>
      </div>
      <div class="f5 mid-gray">
      <br>
      N&#39;hésitez pas à partager
      

<a class="resp-sharing-button__link" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjsgonsette.github.io%2fprojects%2fipendulum%2fpart1%2f" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--facebook resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://twitter.com/intent/tweet/?text=iPendulum - Pendule%20invers%c3%a9%2c%20part%201&amp;url=https%3a%2f%2fjsgonsette.github.io%2fprojects%2fipendulum%2fpart1%2f" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--twitter resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z"/></svg>
    </div>
  </div>
</a>






<a class="resp-sharing-button__link" href="mailto:?subject=iPendulum - Pendule%20invers%c3%a9%2c%20part%201&amp;body=https%3a%2f%2fjsgonsette.github.io%2fprojects%2fipendulum%2fpart1%2f" target="_self" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--email resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z"/></svg>
    </div>
  </div>
</a>


<a class="resp-sharing-button__link" href="https://pinterest.com/pin/create/button/?url=https%3a%2f%2fjsgonsette.github.io%2fprojects%2fipendulum%2fpart1%2f&amp;media=https://jsgonsette.github.io/&amp;description=iPendulum - Pendule%20invers%c3%a9%2c%20part%201" target="_blank" rel="noopener" aria-label="">
  <div class="resp-sharing-button resp-sharing-button--pinterest resp-sharing-button--small"><div aria-hidden="true" class="resp-sharing-button__icon resp-sharing-button__icon--solid">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.14.5C5.86.5 2.7 5 2.7 8.75c0 2.27.86 4.3 2.7 5.05.3.12.57 0 .66-.33l.27-1.06c.1-.32.06-.44-.2-.73-.52-.62-.86-1.44-.86-2.6 0-3.33 2.5-6.32 6.5-6.32 3.55 0 5.5 2.17 5.5 5.07 0 3.8-1.7 7.02-4.2 7.02-1.37 0-2.4-1.14-2.07-2.54.4-1.68 1.16-3.48 1.16-4.7 0-1.07-.58-1.98-1.78-1.98-1.4 0-2.55 1.47-2.55 3.42 0 1.25.43 2.1.43 2.1l-1.7 7.2c-.5 2.13-.08 4.75-.04 5 .02.17.22.2.3.1.14-.18 1.82-2.26 2.4-4.33.16-.58.93-3.63.93-3.63.45.88 1.8 1.65 3.22 1.65 4.25 0 7.13-3.87 7.13-9.05C20.5 4.15 17.18.5 12.14.5z"/></svg>
    </div>
  </div>
</a>


    </div>
    </article>
    <aside class="ph3 mt2 mt6-ns">
      







  <div class="bg-light-gray pa3">
    <ul>
      <li class="list b mb3">
        2 autres articles dans iPendulum
      </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/projects/ipendulum/part1/" class="link ph2 pv2 db black o-50">
            Pendule inversé, part 1
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/projects/ipendulum/part2/" class="link ph2 pv2 db black">
            Pendule inversé, part 2
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/projects/ipendulum/part3/" class="link ph2 pv2 db black">
            Pendule inversé, part 3
          </a>
        </li>
      
    </ul>
  </div>


    </aside>
  </div>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://jsgonsette.github.io/" >
    &copy; 2021 Jean-Sébastien Gonsette
  </a>
  <p align="right">






  <a href="https://www.linkedin.com/in/jsgonsette/" class="link-transition linkedin link dib z-999 pt3 pt0-l mr2" title="LinkedIn link">
    <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

  </a>


  <a href="https://github.com/jsgonsette" class="link-transition github link dib z-999 pt3 pt0-l mr2" title="Github link">
    <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

  </a>

</p>
  </div>
</footer>

    <script src="https://jsgonsette.github.io/dist/app.bundle.js" async></script>

  </body>
</html>
